# HashiCorp Multi-Cloud Infrastructure Management Platform
# Example Terraform variables file
# Copy this file to terraform.tfvars and customize the values for your environment

# Project Configuration
project_name = "hashicorp-multicloud-prod"
environment  = "production"
owner        = "platform-engineering-team"
cost_center  = "infrastructure-ops"

# Consul Backend Configuration (for Terraform state storage)
consul_backend_address = "consul-backend.example.com:8500"

# AWS Configuration
aws_regions = {
  primary   = "us-west-2"
  secondary = "us-east-1"
}

aws_vpc_cidrs = {
  primary   = "10.0.0.0/16"
  secondary = "10.1.0.0/16"
}

aws_instance_types = {
  consul   = "m5.xlarge"
  vault    = "m5.xlarge"
  nomad    = "m5.large"
  boundary = "m5.large"
}

# Azure Configuration
azure_subscription_id      = "12345678-1234-1234-1234-123456789012"
azure_resource_group_name  = "rg-hashicorp-multicloud-prod"

azure_regions = {
  primary   = "West US 2"
  secondary = "East US"
}

azure_vnet_address_space = ["10.2.0.0/16"]
azure_subnet_prefixes    = ["10.2.1.0/24", "10.2.2.0/24", "10.2.3.0/24"]
azure_vm_size           = "Standard_D4s_v3"
azure_node_count        = 3

# Google Cloud Configuration
gcp_project_id = "my-gcp-project-id"

gcp_regions = {
  primary   = "us-west1"
  secondary = "us-east1"
}

gcp_vpc_cidrs = {
  primary   = "10.3.0.0/16"
  secondary = "10.4.0.0/16"
}

gcp_machine_types = {
  consul   = "n1-standard-4"
  vault    = "n1-standard-4"
  nomad    = "n1-standard-2"
  boundary = "n1-standard-2"
}

# Cluster Sizing
min_cluster_size     = 3
max_cluster_size     = 10
desired_cluster_size = 5

# HashiCorp Products Enable/Disable
enable_terraform_enterprise = true
enable_consul              = true
enable_vault               = true
enable_nomad               = true
enable_boundary            = true

# Consul Configuration
consul_datacenter      = "dc1"
consul_encryption_key  = "your-consul-encryption-key-base64"
consul_connect_enabled = true
consul_acl_enabled     = true

enable_consul_federation   = true
consul_federation_secret   = "your-consul-federation-secret"

enable_cross_cloud_service_mesh = true
consul_connect_ca_provider      = "vault"

consul_mesh_gateway_config = {
  mode = "local"
  bind_addresses = {
    wan = "0.0.0.0:8443"
  }
}

consul_ca_config = {
  root_pki_path         = "pki"
  intermediate_pki_path = "pki_int"
}

# Vault Configuration
vault_storage_backend = "consul"
vault_storage_config = {
  path = "vault/"
}

enable_vault_replication = true
vault_primary_cluster    = "aws-primary"

# Nomad Configuration
nomad_datacenter = "dc1"
nomad_region     = "global"
nomad_acl_enabled = true

enable_nomad_federation    = true
nomad_federation_regions   = ["aws", "azure", "gcp"]

# Boundary Configuration
boundary_database_url = "postgresql://boundary:password@boundary-db.example.com:5432/boundary"

boundary_kms_config = {
  purpose = "root"
  kms_type = "aws"
  key_id  = "your-aws-kms-key-id"
}

# Cross-Cloud Networking
enable_cross_cloud_vpn    = true
enable_aws_transit_gateway = true
transit_gateway_asn       = 64512

cross_cloud_vpn_secrets = {
  "aws-to-azure" = "your-shared-secret-1"
  "aws-to-gcp"   = "your-shared-secret-2"
  "azure-to-gcp" = "your-shared-secret-3"
}

enable_cross_cloud_peering = true

cross_cloud_peering_config = {
  aws_to_azure = {
    aws_vpc_id    = "vpc-12345678"
    azure_vnet_id = "/subscriptions/subscription-id/resourceGroups/rg-name/providers/Microsoft.Network/virtualNetworks/vnet-name"
  }
}

# Monitoring Configuration
prometheus_retention_days = 30
grafana_admin_password    = "secure-grafana-password"

alertmanager_config = {
  smtp_smarthost      = "smtp.example.com:587"
  smtp_from          = "alerts@example.com"
  smtp_auth_username = "alerts@example.com"
  smtp_auth_password = "smtp-password"
}

monitoring_notification_channels = [
  "ops-team@example.com",
  "platform-alerts@example.com"
]

# Backup and Disaster Recovery
enable_automated_backups = true
backup_schedule         = "0 2 * * *"  # Daily at 2 AM
backup_retention_days   = 30

enable_cross_cloud_backup = true
backup_replication_regions = [
  "us-east-1",
  "us-west-2", 
  "eu-west-1"
]

consul_backup_config = {
  s3_bucket = "consul-backups-bucket"
  s3_region = "us-west-2"
}

vault_backup_config = {
  s3_bucket = "vault-backups-bucket"
  s3_region = "us-west-2"
}

nomad_backup_config = {
  s3_bucket = "nomad-backups-bucket"
  s3_region = "us-west-2"
}

enable_disaster_recovery  = true
disaster_recovery_regions = ["us-east-1", "eu-west-1"]
recovery_time_objective   = 60  # 1 hour RTO
recovery_point_objective  = 15  # 15 minutes RPO

# Security and Compliance
enable_security_scanning = true
security_scan_schedule   = "0 0 * * 0"  # Weekly on Sunday

compliance_frameworks = [
  "SOC2",
  "PCI-DSS", 
  "HIPAA",
  "ISO-27001"
]

enable_audit_logging     = true
audit_log_retention_days = 90

enable_policy_as_code = true

sentinel_policies = [
  "enforce-mandatory-tags",
  "restrict-instance-types",
  "require-encryption-at-rest"
]

opa_policies = [
  "network-security-policy",
  "data-classification-policy"
]

# Cost Management
enable_cost_optimization = true
cost_optimization_schedule = "0 6 * * 1"  # Weekly on Monday at 6 AM

enable_budget_alerts = true

monthly_budget_thresholds = {
  warning  = 80   # 80% of budget
  critical = 95   # 95% of budget
}

budget_notification_emails = [
  "finance@example.com",
  "platform-team@example.com"
]

# SSL/TLS and DNS Configuration
ssl_certificate_arn = "arn:aws:acm:us-west-2:123456789012:certificate/12345678-1234-1234-1234-123456789012"
domain_name        = "hashicorp.example.com"
route53_zone_id    = "Z1D633PJN98FT9"

# Advanced Configuration
enable_advanced_monitoring  = true
enable_log_aggregation      = true
log_retention_days         = 30
enable_distributed_tracing = true

# Custom Tags
custom_tags = {
  BusinessUnit = "Platform Engineering"
  Application  = "HashiCorp Multi-Cloud Platform"
  Criticality  = "High"
  DataClass    = "Internal"
  Backup       = "Required"
  Monitoring   = "Enhanced"
}

# Performance Tuning
# Uncomment and adjust these values for performance optimization

# consul_performance_config = {
#   raft_multiplier = 1
#   leave_on_terminate = true
#   rejoin_after_leave = true
# }

# vault_performance_config = {
#   cluster_name = "vault-primary"
#   api_addr = "https://vault.example.com:8200"
#   cluster_addr = "https://vault.example.com:8201"
# }

# nomad_performance_config = {
#   heartbeat_grace = "30s"
#   min_heartbeat_ttl = "10s"
#   max_heartbeat_ttl = "180s"
# }

# High Availability Configuration
# enable_multi_region_deployment = true
# enable_active_active_vault = true
# enable_consul_wan_federation = true
# enable_nomad_multi_region = true

# Development/Testing Overrides
# Uncomment these for development environments

# min_cluster_size = 1
# max_cluster_size = 3
# desired_cluster_size = 1
# enable_cross_cloud_vpn = false
# enable_disaster_recovery = false
# backup_retention_days = 7