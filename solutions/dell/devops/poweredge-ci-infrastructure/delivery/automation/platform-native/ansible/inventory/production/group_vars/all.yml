# Dell PowerEdge CI Infrastructure - Production Variables
# Generated from configuration.csv - Production column
# EO Framework - Dell DevOps Solutions

---
#=============================================================================
# PROJECT METADATA
#=============================================================================
solution:
  name: poweredge-ci-infrastructure
  abbr: pci
  provider: dell
  category: devops

environment: production
datacenter_name: "{{ datacenter_name | default('Primary Datacenter') }}"

#=============================================================================
# GITLAB CONFIGURATION
#=============================================================================
gitlab:
  version: "16.8-ee"
  edition: premium
  server_count: 2
  ha_enabled: true

  # Database
  database:
    type: postgresql
    version: "15"
    ha_enabled: true
    patroni_enabled: true

  # External URL
  external_url: "{{ gitlab_external_url | default('https://gitlab.company.com') }}"

  # Storage
  storage:
    repositories_path: /var/opt/gitlab/git-data
    artifacts_path: /var/opt/gitlab/gitlab-rails/shared/artifacts

#=============================================================================
# BUILD INFRASTRUCTURE
#=============================================================================
build:
  # Build agents
  agent_count: 8
  agent_model: PowerEdge-R650

  # Hardware specs
  hardware:
    cpu_model: Intel-Xeon-Gold-6338
    cpu_cores: 32
    memory_gb: 256
    storage_tb: 2
    storage_type: NVMe

  # GitLab Runner configuration
  runners:
    total_count: 24
    per_agent: 3
    executor: docker
    docker_version: "24.0"
    concurrent_builds: 24

  # Performance targets
  performance:
    daily_build_volume: 5000
    concurrent_builds: 24
    queue_target_min: 5

#=============================================================================
# USER BASE
#=============================================================================
users:
  developer_count: 50
  team_count: 12
  teams:
    - Platform
    - Backend
    - Frontend
    - Mobile
    - QA

#=============================================================================
# ARTIFACT MANAGEMENT
#=============================================================================
artifactory:
  version: "7.x-pro"
  storage_tb: 20

  # Repository types
  repositories:
    maven:
      enabled: true
      type: remote
      remote_url: https://repo.maven.apache.org/maven2
    npm:
      enabled: true
      type: remote
      remote_url: https://registry.npmjs.org
    docker:
      enabled: true
      type: local
      registry_port: 5000

  # Integration
  gitlab_integration: true

#=============================================================================
# CONTAINER PLATFORM
#=============================================================================
docker:
  version: "24.0"
  edition: enterprise

  # Docker daemon configuration
  daemon:
    storage_driver: overlay2
    log_driver: json-file
    log_max_size: 100m
    log_max_file: 3

  # BuildKit
  buildkit_enabled: true

  # Registry
  registry:
    mirror: "{{ docker_registry_mirror | default('') }}"

#=============================================================================
# AUTHENTICATION & SECURITY
#=============================================================================
authentication:
  # Single Sign-On
  sso:
    enabled: true
    provider: SAML
    idp_url: "{{ sso_idp_url | default('https://idp.company.com') }}"

  # SSH keys
  ssh:
    enabled: true
    key_type: ed25519

security:
  # Vulnerability scanning
  vulnerability_scanning:
    enabled: true
    scan_on_push: true

  # Secret management
  secret_backend: gitlab-ci-variables

  # Audit logging
  audit_log_retention_days: 365

  # Firewall
  firewall_enabled: true

#=============================================================================
# MONITORING
#=============================================================================
monitoring:
  solution: prometheus-grafana

  # Prometheus
  prometheus:
    retention_days: 30
    scrape_interval: 30s

  # Grafana
  grafana:
    enabled: true
    port: 3000

  # GitLab metrics
  gitlab_metrics:
    enabled: true
    endpoint: "/-/metrics"

  # Node exporter
  node_exporter:
    enabled: true
    port: 9100

  # Docker metrics
  docker_metrics:
    enabled: true

#=============================================================================
# OPERATIONS
#=============================================================================
operations:
  # Backup
  backup:
    enabled: true
    schedule: "Daily 02:00"
    retention_days: 30

  # Disaster Recovery
  dr:
    enabled: true
    rto_hours: 4
    rpo_hours: 1

  # Maintenance
  maintenance:
    window: "Sunday 02:00-06:00 UTC"

#=============================================================================
# SUPPORT
#=============================================================================
support:
  dell_prosupport_level: ProSupport-Plus
  support_response: "4-hour"
  support_hours: "24x7"

#=============================================================================
# NETWORK CONFIGURATION
#=============================================================================
network:
  # Subnets
  management_subnet: "10.20.0.0/24"
  build_subnet: "10.20.1.0/24"

  # DNS
  dns_servers:
    - "{{ dns_server_1 | default('8.8.8.8') }}"
    - "{{ dns_server_2 | default('8.8.4.4') }}"

  # NTP
  ntp_servers:
    - "{{ ntp_server | default('ntp.company.com') }}"

#=============================================================================
# DELL OPENMANAGE INTEGRATION
#=============================================================================
dell:
  openmanage:
    enabled: true
    ome_server: "{{ ome_server | default('ome.company.com') }}"

  # iDRAC
  idrac:
    enabled: true
    version: 9

  # SupportAssist
  supportassist:
    enabled: true
