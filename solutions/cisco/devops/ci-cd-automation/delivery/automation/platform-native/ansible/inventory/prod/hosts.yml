---
#------------------------------------------------------------------------------
# Cisco Network CI/CD Automation - Production Inventory
#------------------------------------------------------------------------------
# This inventory uses variables from vars/generated/ for PRODUCTION environment
#------------------------------------------------------------------------------

all:
  hosts:
    localhost:
      ansible_connection: local
      ansible_python_interpreter: "{{ ansible_playbook_python }}"
      environment_name: production

  children:
    cicd_servers:
      hosts:
        gitlab:
          ansible_host: "{{ gitlab.url | urlsplit('hostname') }}"
        jenkins:
          ansible_host: "{{ jenkins.url | urlsplit('hostname') }}"
      vars:
        ansible_connection: local
        # API-based management, not SSH

    orchestration:
      hosts:
        dnac:
          ansible_host: "{{ dnac.hostname }}"
        nso:
          ansible_host: "{{ nso.hostname }}"
      vars:
        ansible_connection: local
        # REST API connections

    secrets_management:
      hosts:
        vault:
          ansible_host: "{{ vault.address | urlsplit('hostname') }}"
      vars:
        ansible_connection: local

  vars:
    deployment_environment: prod
    environment_suffix: prod

    # Load environment-specific variables
    vars_files_env:
      - "{{ playbook_dir }}/../vars/generated/project.yml"
      - "{{ playbook_dir }}/../vars/generated/gitlab.yml"
      - "{{ playbook_dir }}/../vars/generated/jenkins.yml"
      - "{{ playbook_dir }}/../vars/generated/cisco_dna_center.yml"
      - "{{ playbook_dir }}/../vars/generated/nso.yml"
      - "{{ playbook_dir }}/../vars/generated/ansible_config.yml"
      - "{{ playbook_dir }}/../vars/generated/terraform.yml"
      - "{{ playbook_dir }}/../vars/generated/vault.yml"
      - "{{ playbook_dir }}/../vars/generated/netbox.yml"
      - "{{ playbook_dir }}/../vars/generated/monitoring.yml"
      - "{{ playbook_dir }}/../vars/generated/logging.yml"
      - "{{ playbook_dir }}/../vars/generated/container.yml"
      - "{{ playbook_dir }}/../vars/generated/kubernetes.yml"
      - "{{ playbook_dir }}/../vars/generated/itsm.yml"
      - "{{ playbook_dir }}/../vars/generated/pipeline.yml"
      - "{{ playbook_dir }}/../vars/generated/notifications.yml"
      - "{{ playbook_dir }}/../vars/generated/operations.yml"
      - "{{ playbook_dir }}/../vars/generated/support.yml"
      - "{{ playbook_dir }}/../vars/secrets.yml"
