# Chrony Configuration - Generated by Ansible
# DGX SuperPOD Time Synchronization

# NTP Servers
server {{ operations.ntp_server_primary }} iburst prefer
{% if operations.ntp_server_secondary is defined and operations.ntp_server_secondary %}
server {{ operations.ntp_server_secondary }} iburst
{% endif %}

# Fallback to pool servers if local servers unavailable
pool ntp.ubuntu.com iburst maxsources 4

# Record the rate at which the system clock gains/loses time
driftfile /var/lib/chrony/drift

# Allow the system clock to be stepped in the first three updates
makestep 1.0 3

# Enable kernel synchronization of the real-time clock
rtcsync

# Enable hardware timestamping on all interfaces that support it
hwtimestamp *

# Increase the minimum number of selectable sources required to adjust
# the system clock
minsources 2

# Specify directory for log files
logdir /var/log/chrony

# Select which information is logged
log tracking measurements statistics
