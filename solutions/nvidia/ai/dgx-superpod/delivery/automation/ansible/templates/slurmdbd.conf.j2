#------------------------------------------------------------------------------
# Slurm Database Daemon Configuration - Generated by Ansible
# DGX SuperPOD Cluster: {{ cluster.name }}
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# General Settings
#------------------------------------------------------------------------------
DbdHost={{ slurm.controller_ip }}
DbdPort=6819
SlurmUser=slurm
LogFile=/var/log/slurm/slurmdbd.log
PidFile=/var/run/slurmdbd.pid
DebugLevel=info

#------------------------------------------------------------------------------
# Database Connection
#------------------------------------------------------------------------------
StorageType=accounting_storage/mysql
StorageHost=localhost
StoragePort=3306
StorageUser=slurm
StoragePass={{ vault_slurm_db_password | default('slurm_password') }}
StorageLoc={{ slurm.accounting_db }}

#------------------------------------------------------------------------------
# Archive Configuration (optional)
#------------------------------------------------------------------------------
# ArchiveDir=/var/spool/slurm/archive
# ArchiveScript=/usr/local/bin/slurm_archive.sh
# ArchiveUsage=yes
# PurgeEventAfter=12months
# PurgeJobAfter=12months
# PurgeStepAfter=12months
# PurgeResvAfter=6months
# PurgeSuspendAfter=3months
# PurgeTXNAfter=12months

#------------------------------------------------------------------------------
# Authentication
#------------------------------------------------------------------------------
AuthType=auth/munge
