#------------------------------------------------------------------------------
# NVIDIA Omniverse Enterprise - Production Inventory
#------------------------------------------------------------------------------
# Environment: Production
# Values are populated from group_vars/all.yml (generated from configuration.csv)
#------------------------------------------------------------------------------

all:
  vars:
    environment: prod

  children:
    #--------------------------------------------------------------------------
    # Nucleus Servers
    #--------------------------------------------------------------------------
    nucleus_servers:
      hosts:
        nucleus-primary:
          ansible_host: "{{ nucleus.primary_host }}"
          nucleus_role: primary
        nucleus-replica:
          ansible_host: "{{ nucleus.replica_host }}"
          nucleus_role: replica
      vars:
        ansible_connection: ssh
        ansible_user: "{{ auth.admin_user | default('omniadmin') }}"
        ansible_become: yes

    #--------------------------------------------------------------------------
    # RTX Workstations
    #--------------------------------------------------------------------------
    workstations:
      hosts:
        # Production: 50 RTX workstations
        rtx-ws-001:
          ansible_host: 10.100.1.1
        rtx-ws-002:
          ansible_host: 10.100.1.2
        rtx-ws-003:
          ansible_host: 10.100.1.3
        rtx-ws-004:
          ansible_host: 10.100.1.4
        rtx-ws-005:
          ansible_host: 10.100.1.5
        # ... additional workstations defined dynamically
      vars:
        ansible_connection: winrm
        ansible_winrm_transport: ntlm
        ansible_winrm_server_cert_validation: ignore
        ansible_user: "{{ auth.admin_user | default('omniadmin') }}"

    #--------------------------------------------------------------------------
    # Infrastructure Services
    #--------------------------------------------------------------------------
    monitoring:
      hosts:
        prometheus-server:
          ansible_host: "{{ monitoring.prometheus_server }}"
        grafana-server:
          ansible_host: "{{ monitoring.grafana_server }}"
      vars:
        ansible_connection: ssh
        ansible_user: "{{ auth.admin_user | default('svcadmin') }}"
        ansible_become: yes

    #--------------------------------------------------------------------------
    # Storage Servers
    #--------------------------------------------------------------------------
    storage:
      hosts:
        storage-primary:
          ansible_host: "{{ storage.primary_server | default('storage.client.local') }}"
      vars:
        ansible_connection: ssh
        ansible_user: admin
        ansible_become: yes

    #--------------------------------------------------------------------------
    # Local Execution
    #--------------------------------------------------------------------------
    localhost:
      hosts:
        localhost:
          ansible_connection: local
          ansible_python_interpreter: "{{ ansible_playbook_python }}"
